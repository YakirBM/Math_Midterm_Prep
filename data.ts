import { Topic } from './types';

export const topics: Topic[] = [
  {
    id: 'topic-1',
    title: 'תחום הגדרה, טווח ותכונות',
    description: 'חזרה על פונקציות בסיסיות, שורשים, לוגריתמים וטריגונומטריה.',
    questions: [
      {
        id: 1,
        title: 'תחום הגדרה - שורש וסינוס',
        content: 'מצא את תחום ההגדרה של הפונקציה: $$f(x) = \\sqrt{\\sin(2x)}$$',
        type: 'multiple-choice',
        options: [
          { id: 'a', text: '$x \\in [k\\pi, \\frac{\\pi}{2}+k\\pi]$', isCorrect: true },
          { id: 'b', text: '$x \\in [2k\\pi, \\pi+2k\\pi]$', isCorrect: false },
          { id: 'c', text: '$x \\in [0, \\pi]$', isCorrect: false },
          { id: 'd', text: 'כל $x$ ממשי', isCorrect: false },
        ],
        solution: {
          concept: 'שורש זוגי דורש תוכן אי-שלילי. פונקציות טריגונומטריות הן מחזוריות, ולכן יש למצוא פתרון כללי ולא רק למחזור הראשון.',
          steps: [
            '1. תנאי קיום השורש: הביטוי בתוך השורש חייב להיות גדול או שווה לאפס. $$\\sin(2x) \\ge 0$$',
            '2. בדיקת המחזור הראשון: מתי פונקציית הסינוס חיובית? הסינוס חיובי ברביע הראשון והשני של מעגל היחידה, כלומר בין זווית $0$ ל-$\pi$.',
            '3. נבנה את אי-השוויון עבור הזווית $2x$: $$0 \\le 2x \\le \\pi$$',
            '4. הוספת מחזוריות: פונקציית הסינוס חוזרת על עצמה כל $2\\pi$. לכן נוסיף $2\\pi k$ (כפולות שלמות של המחזור) לשני הצדדים: $$2\\pi k \\le 2x \\le \\pi + 2\\pi k$$',
            '5. מציאת $x$: נחלק את כל אי-השוויון ב-2 כדי לבודד את $x$: $$k\\pi \\le x \\le \\frac{\\pi}{2} + k\\pi$$'
          ],
          finalAnswer: 'א'
        },
        expandedExplanation: {
          title: 'תחום הגדרה במעגל היחידה',
          visualizationType: 'unit-circle',
          content: `
            <p>כשאנו מתבקשים למצוא תחום הגדרה של פונקציית שורש זוגי המכילה ביטוי טריגונומטרי, עלינו לשלב שני עולמות:</p>
            <ol class="list-decimal list-inside space-y-2 my-2">
              <li><strong>אילוץ השורש:</strong> התוכן חייב להיות חיובי או אפס ($A \\ge 0$).</li>
              <li><strong>התנהגות מחזורית:</strong> הפתרון חוזר על עצמו אינסוף פעמים.</li>
            </ol>
            <p>במעגל היחידה (ראה איור), ציר ה-Y מייצג את ערך הסינוס. לכן, הסינוס חיובי בחצי העליון של המעגל (רביעים 1 ו-2), ושלילי בחצי התחתון.</p>
            <p>מכיוון שהזווית שלנו היא $2x$, אנו דורשים ש-$2x$ "ייפול" בחצי העליון של המעגל. לאחר מכן, החלוקה ב-2 "מכווצת" את התחום בציר ה-x.</p>
          `
        }
      },
      {
        id: 2,
        title: 'תחום וטווח - ארכ-טנגנס',
        content: 'מצא את תחום ההגדרה והטווח של הפונקציה: $$y(x) = \\tan^{-1}(\\sin x)$$',
        type: 'multiple-choice',
        options: [
          { id: 'a', text: 'תחום: $-\\infty < x < \\infty$, טווח: $-\\pi/4 \\le y \\le \\pi/4$', isCorrect: true },
          { id: 'b', text: 'תחום: $-\\infty < x < \\infty$, טווח: $-\\infty < y < \\infty$', isCorrect: false },
          { id: 'c', text: 'תחום: $-\\pi/2 \\le x \\le \\pi/2$, טווח: $-\\infty < y < \\infty$', isCorrect: false },
          { id: 'd', text: 'תחום: $-\\pi/2 \\le x \\le \\pi/2$, טווח: $-\\pi/4 \\le y \\le \\pi/4$', isCorrect: false },
        ],
        solution: {
          concept: 'פונקציות מורכבות מנתחים מבפנים החוצה. יש להכיר את התחום והטווח של הפונקציות הבסיסיות (סינוס וארכ-טנגנס).',
          steps: [
            '1. מציאת תחום ההגדרה (Domain): נתבונן בפונקציה הפנימית $\\sin x$. היא מוגדרת לכל $x$ ממשי. הפונקציה החיצונית $\\tan^{-1}(t)$ מוגדרת לכל $t$ ממשי. לכן, אין מגבלות על $x$. התחום הוא $(-\\infty, \\infty)$.',
            '2. מציאת הטווח (Range): נתבונן בערכים שהפונקציה הפנימית מוציאה. הטווח של $\\sin x$ הוא $[-1, 1]$.',
            '3. כעת, נבדוק מה עושה הפונקציה החיצונית לערכים אלו. הפונקציה $f(t) = \\tan^{-1}(t)$ היא פונקציה עולה מונוטונית.',
            '4. לכן, ערכי הקיצון של הפונקציה המורכבת יתקבלו בקצוות הטווח של הפונקציה הפנימית:',
            '   מינימום: $\\tan^{-1}(-1) = -\\frac{\\pi}{4}$',
            '   מקסימום: $\\tan^{-1}(1) = \\frac{\\pi}{4}$',
            '5. מכאן שהטווח הוא: $[-\\frac{\\pi}{4}, \\frac{\\pi}{4}]$.'
          ],
          finalAnswer: 'א'
        },
        expandedExplanation: {
          title: 'טווח של פונקציה מורכבת',
          visualizationType: 'domain-range',
          content: `
            <p>דמיינו פס ייצור (כמו באיור):</p>
            <ul class="list-disc list-inside space-y-2 my-2">
              <li><strong>שלב 1 (הפונקציה הפנימית - Sin):</strong> מכניסים את כל המספרים בעולם ($-\\infty$ עד $\\infty$). המכונה הראשונה, הסינוס, "מועכת" את הכל ומוציאה רק מספרים בין -1 ל-1.</li>
              <li><strong>שלב 2 (הפונקציה החיצונית - ArcTan):</strong> המכונה השנייה מקבלת <strong>רק</strong> את מה שיצא מהראשונה (כלומר מספרים בין -1 ל-1). היא לא "יודעת" שהיו שם מספרים אחרים קודם.</li>
            </ul>
            <p>מכיוון ש-arctan היא פונקציה עולה (ככל שהקלט גדל, הפלט גדל), המינימום מתקבל בקלט המינימלי (-1) והמקסימום בקלט המקסימלי (1).</p>
          `
        }
      },
      {
        id: 3,
        title: 'מחזוריות',
        content: 'מצא את המחזור הקטן ביותר של הפונקציה: $$f(x) = \\sin(2x)\\cos(2x)$$',
        type: 'multiple-choice',
        options: [
          { id: 'a', text: '$\\frac{\\pi}{2}$', isCorrect: true },
          { id: 'b', text: '$\\pi$', isCorrect: false },
          { id: 'c', text: '$2\\pi$', isCorrect: false },
          { id: 'd', text: '$4\\pi$', isCorrect: false },
        ],
        solution: {
          concept: 'שימוש בזהויות טריגונומטריות לפישוט הפונקציה מקל משמעותית על מציאת המחזור.',
          steps: [
            '1. זיהוי תבנית: הביטוי מזכיר את הזהות לזווית כפולה: $$\\sin(2\\alpha) = 2\\sin\\alpha\\cos\\alpha$$',
            '2. התאמת הפונקציה לזהות: נכפול ונחלק ב-2 כדי להשתמש בזהות: $$f(x) = \\frac{1}{2} \\cdot [2\\sin(2x)\\cos(2x)]$$',
            '3. הפעלת הזהות: כעת הזווית $\\alpha$ היא $2x$, ולכן נקבל: $$f(x) = \\frac{1}{2}\\sin(2 \\cdot 2x) = \\frac{1}{2}\\sin(4x)$$',
            '4. חישוב המחזור: הנוסחה למחזור של פונקציית סינוס מהצורה $\\sin(kx)$ היא $T = \\frac{2\\pi}{k}$.',
            '5. הצבה בנוסחה: כאן המקדם של $x$ הוא $k=4$. לכן: $$T = \\frac{2\\pi}{4} = \\frac{\\pi}{2}$$'
          ],
          finalAnswer: 'א'
        },
        expandedExplanation: {
          title: 'מחזוריות של פונקציות',
          visualizationType: 'general',
          content: `
            <p>המחזור הבסיסי של פונקציות $\\sin(x)$ ו-$\\cos(x)$ הוא $2\\pi$. זהו האורך של "גל" אחד מלא.</p>
            <p>כאשר אנו כופלים את $x$ במספר $k$ (למשל $\\sin(kx)$), אנו למעשה "מריצים" את הפונקציה מהר יותר. זה גורם לכיווץ אופקי של הגרף.</p>
            <p><strong>הכלל:</strong> אם כופלים את המשתנה ב-$k$, המחזור מתחלק ב-$k$.</p>
            <p>בשאלה זו, המניפולציה האלגברית הביאה אותנו לפונקציה $\\sin(4x)$. כלומר הפונקציה "רצה" פי 4 יותר מהר, ולכן המחזור שלה קצר פי 4 מהמחזור המקורי.</p>
          `
        }
      },
      {
        id: 4,
        title: 'הרכבת פונקציות טריגונומטריות והיפרבוליות',
        content: 'מהו תחום ההגדרה של הפונקציה? $$f(x) = \\tan(\\tanh(x))$$',
        type: 'multiple-choice',
        options: [
          { id: 'a', text: '$\\mathbb{R}$ (כל המספרים)', isCorrect: true },
          { id: 'b', text: '$(-1, 1)$', isCorrect: false },
          { id: 'c', text: '$x \\ne \\frac{\\pi}{2} + \\pi k$', isCorrect: false },
          { id: 'd', text: '$x > 0$', isCorrect: false },
        ],
        solution: {
          concept: 'בדיקת "שרשרת" הגבלות. האם הפונקציה הפנימית מייצרת ערכים שהפונקציה החיצונית לא יודעת לקבל?',
          steps: [
            '1. ניתוח הפונקציה הפנימית: $\\tanh(x)$ מוגדרת לכל $x$. טווח הערכים שהיא מחזירה הוא בין $-1$ ל-$1$. כלומר: $$-1 < \\tanh(x) < 1$$',
            '2. ניתוח הפונקציה החיצונית: הפונקציה $\\tan(u)$ לא מוגדרת כאשר $u = \\pm\\frac{\\pi}{2}, \\pm\\frac{3\\pi}{2}, \\dots$.',
            '3. הערך הבעייתי הקרוב ביותר לאפס הוא $\\frac{\\pi}{2} \\approx 1.57$.',
            '4. בדיקת התנגשות: האם הפלט של הפונקציה הפנימית (שהוא לכל היותר 1) מגיע לערך הבעייתי (1.57)? התשובה היא לא. הערך $1$ קטן מ- $1.57$.',
            '5. מסקנה: הפונקציה החיצונית תמיד מקבלת ערך "בטוח", ולכן הפונקציה מוגדרת לכל $x$.'
          ],
          finalAnswer: 'א'
        },
        expandedExplanation: {
          title: 'מגבלות בהרכבת פונקציות',
          visualizationType: 'domain-range',
          content: `
            <p>בפונקציה מורכבת $f(g(x))$, התחום נקבע על ידי שתי שאלות:</p>
            <ol class="list-decimal list-inside space-y-2 my-2">
              <li>האם $x$ מותר להצבה ב-$g$?</li>
              <li>האם התוצאה $g(x)$ מותרת להצבה ב-$f$?</li>
            </ol>
            <p>במקרה שלנו, הפונקציה הפנימית $\\tanh(x)$ היא "ילד טוב" - היא מקבלת כל מספר, ומוציאה רק מספרים קטנים (בין -1 ל-1).</p>
            <p>הפונקציה החיצונית $\\tan(u)$ היא "מפונקת" - היא נשברת ב-$\u00b1 1.57$ (שזה $\\pi/2$).</p>
            <p>אבל מכיוון שהפונקציה הפנימית לעולם לא מגיעה ל-1.57, הפונקציה החיצונית לעולם לא נשברת.</p>
          `
        }
      },
      {
        id: 5,
        title: 'לוגריתמים ואקספוננטים',
        content: 'נתונה הפונקציה: $$f(x) = \\ln\\sqrt{1-e^{-x}}$$ מצא את התחום והטווח.',
        type: 'open',
        options: [], 
        solution: {
          concept: 'תחום הגדרה של לאן דורש ארגומנט חיובי. הטווח נקבע על ידי בדיקת הגבולות בקצוות תחום ההגדרה.',
          steps: [
            '-- תחום הגדרה --',
            '1. דרישת הלאן: התוכן $\\sqrt{1-e^{-x}}$ חייב להיות חיובי ממש. שורש הוא תמיד אי-שלילי, אז נדרוש שהתוכן שלו לא יהיה 0 ושיהיה חיובי: $$1-e^{-x} > 0$$',
            '2. פתרון אי השוויון: $$1 > e^{-x}$$',
            '3. הפעלת $\\ln$ על שני האגפים (פונקציה עולה): $$\\ln(1) > \\ln(e^{-x}) \\implies 0 > -x$$',
            '4. כפל במינוס 1 (הופך סימן): $$x > 0$$',
            '-- טווח (תמונה) --',
            '5. נבדוק מה קורה בקצוות התחום ($x \\to 0$ ו- $x \\to \\infty$).',
            '6. גבול באינסוף: כאשר $x \\to \\infty$, הביטוי $e^{-x}$ שואף ל-$0$. לכן תוכן הלאן שואף ל-$\\\\sqrt{1-0}=1$. נקבל: $\\ln(1) = 0$.',
            '7. גבול באפס (מימין): כאשר $x \\to 0^+$, הביטוי $e^{-x}$ שואף ל-$1$ (מלמטה). תוכן השורש שואף ל-$0^+$. נקבל $\\ln(0^+) \\to -\\infty$.',
            '8. מכיוון שהפונקציה רציפה, היא מקבלת את כל הערכים בין $-\\infty$ ל-$0$.'
          ],
          finalAnswer: 'תחום: $x>0$, טווח: $(-\\infty, 0)$'
        },
        expandedExplanation: {
          title: 'התנהגות פונקציית הלאן (ln)',
          visualizationType: 'log-exp',
          content: `
            <p>שני עקרונות ברזל לגבי פונקציית הלוגריתם הטבעי:</p>
            <ul class="list-disc list-inside space-y-2 my-2">
              <li><strong>תחום:</strong> $\\ln(u)$ מוגדר רק כאשר $u > 0$. לא ניתן לחשב לאן של אפס או של מספר שלילי.</li>
              <li><strong>אסימפטוטה:</strong> כאשר התוכן של הלאן מתקרב לאפס (מהצד החיובי), ערך הפונקציה צונח למינוס אינסוף ($-\\infty$).</li>
            </ul>
            <p>בתרגיל זה, הביטוי בתוך הלאן מתקרב לאפס כאשר $x$ מתקרב לאפס, ולכן הטווח יורד עד מינוס אינסוף.</p>
          `
        }
      }
    ]
  },
  {
    id: 'topic-2',
    title: 'זוגיות ואי-זוגיות',
    description: 'בחינת סימטריה של פונקציות.',
    questions: [
      {
        id: 6,
        title: 'זוגיות פונקציה מורכבת',
        content: 'קבע את סוג הפונקציה: $$f(x) = \\frac{e^{\\tan x} - e^{-\\tan x}}{e^{\\tan x} + e^{-\\tan x}}$$',
        type: 'multiple-choice',
        options: [
          { id: 'a', text: 'פונקציה אי-זוגית', isCorrect: true },
          { id: 'b', text: 'פונקציה זוגית', isCorrect: false },
          { id: 'c', text: 'לא זוגית ולא אי-זוגית', isCorrect: false },
        ],
        solution: {
          concept: 'כדי לבדוק זוגיות, מציבים $-x$ במקום $x$ ובודקים את הקשר לפונקציה המקורית. נזכור ש-$\\tan(-x) = -\\tan(x)$.',
          steps: [
            '1. נציב $-x$ בפונקציה: $$f(-x) = \\frac{e^{\\tan(-x)} - e^{-\\tan(-x)}}{e^{\\tan(-x)} + e^{-\\tan(-x)}}$$',
            '2. נשתמש בזהות האי-זוגיות של הטנגנס $\\tan(-x) = -\\tan x$: $$f(-x) = \\frac{e^{-\\tan x} - e^{-(-\\tan x)}}{e^{-\\tan x} + e^{-(-\\tan x)}} = \\frac{e^{-\\tan x} - e^{\\tan x}}{e^{-\\tan x} + e^{\\tan x}}$$ (המכנה נשאר חיובי כי חיבור הוא חילופי)',
            '3. נוציא גורם משותף $(-1)$ במונה: $$f(-x) = \\frac{-(e^{\\tan x} - e^{-\\tan x})}{e^{\\tan x} + e^{-\\tan x}}$$ (שינינו את סדר האיברים במונה והוצאנו מינוס)',
            '4. זיהוי הפונקציה המקורית: הביטוי שקיבלנו הוא בדיוק $-f(x)$.',
            '5. מסקנה: מכיוון ש- $f(-x) = -f(x)$, הפונקציה היא אי-זוגית.'
          ],
          finalAnswer: 'א'
        },
        expandedExplanation: {
          title: 'פונקציות אי-זוגיות',
          visualizationType: 'parity-odd',
          content: `
            <p>פונקציה אי-זוגית מקיימת את התנאי $f(-x) = -f(x)$.</p>
            <p><strong>משמעות גרפית:</strong> הגרף סימטרי ביחס לראשית הצירים (נקודה 0,0). אם נסובב את הגרף ב-180 מעלות, הוא ייראה אותו הדבר.</p>
            <p><strong>טיפ לזיהוי מהיר:</strong> הפונקציה בשאלה מזכירה מאוד את פונקציית הטנגנס ההיפרבולי $\\tanh(t) = \\frac{e^t - e^{-t}}{e^t + e^{-t}}$, שהיא פונקציה אי-זוגית ידועה. כשמרכיבים פונקציה אי-זוגית ($\ tanh$) על פונקציה אי-זוגית ($\ tan$), התוצאה היא אי-זוגית.</p>
          `
        }
      },
      {
        id: 7,
        title: 'זוגיות עם פרמטרים',
        content: 'נתונה $f(x) = a^{\\sin^{2m+1}(x)}$ ($m$ טבעי). מהו הקשר בין $f(-x)$ ל-$f(x)$?',
        type: 'multiple-choice',
        options: [
          { id: 'a', text: '$f(-x) = \\frac{1}{f(x)}$', isCorrect: true },
          { id: 'b', text: '$f(-x) = f(x)$', isCorrect: false },
          { id: 'c', text: '$f(-x) = -f(x)$', isCorrect: false },
          { id: 'd', text: '$f(-x) = f(x)^2$', isCorrect: false },
        ],
        solution: {
          concept: 'בדיקת השפעת המעריך על הסימן. חזקה אי-זוגית ($2m+1$) שומרת על הסימן השלילי.',
          steps: [
            '1. נציב $-x$: $$f(-x) = a^{\\sin^{2m+1}(-x)}$$',
            '2. נטפל בסינוס: $\\sin(-x) = -\\sin(x)$. לכן: $$f(-x) = a^{(-\\sin x)^{2m+1}}$$',
            '3. נטפל בחזקה: המספר $2m+1$ הוא אי-זוגי בהכרח (עבור $m$ טבעי). מינוס בחזקה אי-זוגית נשאר מינוס. $$f(-x) = a^{-\\sin^{2m+1}x}$$',
            '4. חוקי חזקות: חזקה שלילית שקולה להופכי ($a^{-n} = \\frac{1}{a^n}$): $$f(-x) = \\frac{1}{a^{\\sin^{2m+1}x}}$$ (המכנה הוא בדיוק $f(x)$)',
            '5. מסקנה: $f(-x) = \\frac{1}{f(x)}$.'
          ],
          finalAnswer: 'א'
        },
        expandedExplanation: {
          title: 'חזקות זוגיות ואי-זוגיות',
          visualizationType: 'general',
          content: `
            <p>התרגיל בודק הבנה של חוקי חזקות בסיסיים:</p>
            <ul class="list-disc list-inside space-y-2 my-2">
              <li>מספר שלילי בחזקה <strong>זוגית</strong> הופך לחיובי (המינוס "נבלע").</li>
              <li>מספר שלילי בחזקה <strong>אי-זוגית</strong> נשאר שלילי (המינוס "יוצא החוצה").</li>
            </ul>
            <p>מכיוון ש-$2m$ הוא תמיד זוגי, הרי ש-$2m+1$ הוא תמיד אי-זוגי. לכן המינוס מהסינוס נשמר במעריך, ויוצר חזקה שלילית שמשמעותה המספר ההופכי.</p>
          `
        }
      },
      {
        id: 8,
        title: 'זוגיות של הרכבה ומנה',
        content: 'קבע את זוגיות הפונקציה: $$f(x) = \\sin\\left(\\frac{\\sinh x}{\\sin x}\\right)$$',
        type: 'multiple-choice',
        options: [
          { id: 'a', text: 'פונקציה זוגית', isCorrect: true },
          { id: 'b', text: 'פונקציה אי-זוגית', isCorrect: false },
          { id: 'c', text: 'לא זוגית ולא אי-זוגית', isCorrect: false },
        ],
        solution: {
          concept: 'ניתוח פנימי ואז חיצוני. מנה של שתי פונקציות אי-זוגיות היא פונקציה זוגית.',
          steps: [
            '1. ננתח את הארגומנט בתוך הסוגריים: $g(x) = \\frac{\\sinh x}{\\sin x}$.',
            '2. נציב $-x$ ב-$g(x)$: $$g(-x) = \\frac{\\sinh(-x)}{\\sin(-x)}$$',
            '3. שתי הפונקציות אי-זוגיות ($\\sinh(-x)=-\\sinh x$, $\\sin(-x)=-\\sin x$): $$g(-x) = \\frac{-\\sinh x}{-\\sin x} = \\frac{\\sinh x}{\\sin x} = g(x)$$',
            '4. המסקנה היא שהביטוי הפנימי הוא **זוגי**.',
            '5. כעת נסתכל על הפונקציה כולה: $f(x) = \\sin(g(x))$. אם מציבים $-x$, ה-$g$ "בולעת" את המינוס לפני שהוא מגיע לסינוס החיצוני: $$f(-x) = \\sin(g(-x)) = \\sin(g(x)) = f(x)$$',
            '6. הפונקציה כולה היא זוגית.'
          ],
          finalAnswer: 'א'
        },
        expandedExplanation: {
          title: 'אלגברה של זוגיות',
          visualizationType: 'parity-even',
          content: `
            <p>ניתן להתייחס לזוגיות כמו לכפל של סימנים (+ ו- -):</p>
            <ul class="list-disc list-inside space-y-2 my-2">
              <li>פונקציה זוגית $\\leftrightarrow$ חיובי (+)</li>
              <li>פונקציה אי-זוגית $\\leftrightarrow$ שלילי (-)</li>
            </ul>
            <p><strong>כללי כפל/חילוק:</strong></p>
            <p>אי-זוגית / אי-זוגית = זוגית (כמו שמינוס חלקי מינוס שווה פלוס).</p>
            <p>לכן, הארגומנט בתוך הסינוס הוא זוגי. כשפונקציה זוגית "נכנסת" לתוך פונקציה אחרת, התוצאה הסופית תמיד תהיה זוגית, כי המינוס נעלם כבר בשלב הראשון.</p>
          `
        }
      }
    ]
  },
  {
    id: 'topic-3',
    title: 'משוואות, זהויות והופכיות',
    description: 'פתרון משוואות מתקדמות, מציאת פונקציה הפוכה וזהויות.',
    questions: [
      {
        id: 9,
        title: 'מציאת פונקציה מתוך הרכבה',
        content: 'נתון כי $f(\\ln x) = \\frac{\\ln^2 x}{x}$. מצא את הביטוי עבור $f(x)$.',
        type: 'multiple-choice',
        options: [
          { id: 'a', text: '$f(x) = \\frac{x^2}{e^x}$', isCorrect: true },
          { id: 'b', text: '$f(x) = x^2 e^x$', isCorrect: false },
          { id: 'c', text: '$f(x) = \\frac{x}{e^x}$', isCorrect: false },
          { id: 'd', text: '$f(x) = \\frac{2x}{e^x}$', isCorrect: false },
        ],
        solution: {
          concept: 'החלפת משתנים (Substitution) כדי לבודד את הפונקציה המקורית.',
          steps: [
            '1. נסמן משתנה עזר $t$ שיהיה שווה למה שבתוך הסוגריים: $$t = \\ln x$$',
            '2. נחלץ את $x$ באמצעות המשתנה החדש: $$x = e^t$$',
            '3. נחזור למשוואה המקורית ונחליף כל $x$ ב-$e^t$ וכל $\\ln x$ ב-$t$: $$f(t) = \\frac{t^2}{e^t}$$',
            '4. כעת קיבלנו את הכלל של הפונקציה עבור המשתנה $t$. כדי לקבל תשובה ב-$x$ (כמקובל), פשוט נחליף את האות $t$ באות $x$: $$f(x) = \\frac{x^2}{e^x}$$'
          ],
          finalAnswer: 'א'
        },
        expandedExplanation: {
          title: 'טכניקת החלפת משתנים',
          visualizationType: 'general',
          content: `
            <p>כאשר נתונה פונקציה $f(g(x))$ ואנו רוצים למצוא את $f(x)$ ה"טהורה", אנו צריכים "לקלף" את השכבה הפנימית.</p>
            <p>הדרך לעשות זאת היא להגדיר משתנה חדש, נקרא לו $t$, ששווה לביטוי הפנימי. לאחר מכן אנו מבטאים את הכל באמצעות $t$.</p>
            <p>בסוף התהליך, קיבלנו נוסחה כללית שעובדת לכל משתנה, ולכן אפשר לשנות את שמו של $t$ חזרה ל-$x$.</p>
          `
        }
      },
      {
        id: 10,
        title: 'הרכבה וטריגו הפוך',
        content: 'נתונה $f(x) = \\frac{1}{1-\\sin x}$. חשב את $f(f(\\sin^{-1}x))$.',
        type: 'multiple-choice',
        options: [
          { id: 'a', text: '$\\frac{1}{1 - \\sin(\\frac{1}{1-x})}$', isCorrect: true },
          { id: 'b', text: '$\\frac{1}{1-x}$', isCorrect: false },
          { id: 'c', text: '$x$', isCorrect: false },
        ],
        solution: {
          concept: 'ביצוע ההרכבה בשלבים, מבפנים החוצה, תוך שימוש בזהות ההופכית.',
          steps: [
            '1. שלב ראשון: חישוב הפונקציה הפנימית ביותר $f(\\sin^{-1}x)$. נציב $\\sin^{-1}x$ במקום $x$ בפונקציה $f$: $$f(\\sin^{-1}x) = \\frac{1}{1-\\sin(\\sin^{-1}x)}$$',
            '2. פישוט: אנו יודעים ש-$\\sin(\\sin^{-1}x) = x$ (בתחום המתאים). לכן קיבלנו: $$\\frac{1}{1-x}$$',
            '3. שלב שני: הצבת התוצאה שוב ב-$f$. עלינו לחשב את $f(\\frac{1}{1-x})$.',
            '4. נציב את הביטוי השלם $\\frac{1}{1-x}$ במקום ה-$x$ בפונקציית האם: $$f\\left(\\frac{1}{1-x}\\right) = \\frac{1}{1 - \\sin\\left(\\frac{1}{1-x}\\right)}$$'
          ],
          finalAnswer: 'א'
        },
        expandedExplanation: {
          title: 'פונקציות הופכיות',
          visualizationType: 'inverse-function',
          content: `
            <p>העיקרון הבסיסי של פונקציות הופכיות הוא שהן מבטלות זו את זו:</p>
            <p>$$f(f^{-1}(x)) = x$$</p>
            <p>לכן, המפגש בין $\\sin$ ל-$\\sin^{-1}$ (ארק-סינוס) פשוט משאיר אותנו עם ה-$x$ (בתנאי שאנחנו בתוך תחום ההגדרה).</p>
            <p>בשאלה זו, הטריק הוא לא להיבהל מהביטוי המורכב, אלא לפתור צעד-אחר-צעד מבפנים החוצה.</p>
          `
        }
      },
      {
        id: 11,
        title: 'זהויות טריגונומטריות',
        content: 'נתונות $f(x)=\\sin x, g(x)=\\cos x$. פשט את הביטוי: $$\\frac{\\frac{f+g}{f-g} + \\frac{f-g}{f+g}}{\\frac{f+g}{f-g} - \\frac{f-g}{f+g}}$$',
        type: 'multiple-choice',
        options: [
          { id: 'a', text: '$\\sin(2x)$', isCorrect: false },
          { id: 'b', text: '$\\cos(2x)$', isCorrect: false },
          { id: 'c', text: '$\\frac{1}{\\sin(2x)}$', isCorrect: true },
        ],
        solution: {
          concept: 'אלגברה של שברים ושימוש בזהויות כפל מקוצר וזווית כפולה.',
          steps: [
            '1. נסמן $A = f+g$ ו-$B = f-g$. הביטוי הוא: $$\\frac{\\frac{A}{B} + \\frac{B}{A}}{\\frac{A}{B} - \\frac{B}{A}}$$',
            '2. נעשה מכנה משותף במונה ובמכנה בנפרד (או נכפול הכל ב-$AB$): $$\\frac{A^2 + B^2}{A^2 - B^2}$$',
            '3. נציב חזרה את $f$ ו-$g$: $$A^2 + B^2 = (\\sin x+\\cos x)^2 + (\\sin x-\\cos x)^2 = (\\sin^2+2\\sin\\cos+\\cos^2) + (\\sin^2-2\\sin\\cos+\\cos^2) = 2(\\sin^2+\\cos^2) = 2$$',
            '4. נחשב את המכנה: $$A^2 - B^2 = (\\sin x+\\cos x)^2 - (\\sin x-\\cos x)^2 = 4\\sin x\\cos x$$',
            '5. נחלק את המונה במכנה: $$\\frac{2}{4\\sin x\\cos x} = \\frac{1}{2\\sin x\\cos x}$$',
            '6. זהות זווית כפולה: $2\\sin x\\cos x = \\sin(2x)$. לכן התוצאה היא $\\frac{1}{\\sin(2x)}$.'
          ],
          finalAnswer: 'ג'
        },
        expandedExplanation: {
          title: 'זהויות יסוד',
          visualizationType: 'unit-circle',
          content: `
            <p>בתרגיל זה השתמשנו בשתי הזהויות החשובות ביותר בטריגונומטריה:</p>
            <ol class="list-decimal list-inside space-y-2 my-2">
              <li><strong>זהות פיתגורס:</strong> $\\sin^2x + \\cos^2x = 1$. זהות זו נובעת ישירות ממשפט פיתגורס במעגל היחידה ($x^2+y^2=r^2$).</li>
              <li><strong>זווית כפולה:</strong> $\\sin(2x) = 2\\sin x\\cos x$.</li>
            </ol>
            <p>היכולת לזהות את התבניות הללו (כמו $2\\sin\\cos$) בתוך ביטויים אלגבריים מורכבים היא מפתח להצלחה.</p>
          `
        }
      },
      {
        id: 12,
        title: 'משוואה עם לוגריתמים',
        content: 'פתור את המשוואה: $$x^{\\ln(x^2)} = e^3 x$$',
        type: 'multiple-choice',
        options: [
          { id: 'a', text: '$e^{-1}, e^{\\frac{3}{2}}$', isCorrect: true },
          { id: 'b', text: '$e, e^{-1}$', isCorrect: false },
          { id: 'c', text: '$e^3, e^{-3}$', isCorrect: false },
          { id: 'd', text: '$1, e$', isCorrect: false },
        ],
        solution: {
          concept: 'כשיש נעלם בחזקה שהיא בעצמה לוג, נוציא $\\ln$ משני האגפים כדי "להוריד" את החזקה.',
          steps: [
            '1. הפעלת $\\ln$ על שני האגפים: $$\\ln(x^{\\ln(x^2)}) = \\ln(e^3 x)$$',
            '2. שימוש בחוקי לוגריתמים (החזקה יורדת לכפל): $$\\ln(x^2) \\cdot \\ln x = \\ln(e^3) + \\ln x$$',
            '3. פישוט נוסף ($\\ln(x^2) = 2\\ln x$): $$2\\ln x \\cdot \\ln x = 3 + \\ln x \\implies 2(\\ln x)^2 - \\ln x - 3 = 0$$',
            '4. הצבת משתנה עזר $t = \\ln x$: $$2t^2 - t - 3 = 0$$',
            '5. פתרון המשוואה הריבועית (טרינום או נוסחת שורשים): $$t_{1,2} = \\frac{1 \\pm \\sqrt{1 - 4(2)(-3)}}{4} = \\frac{1 \\pm 5}{4}$$ $$t_1 = \\frac{6}{4} = 1.5, \\quad t_2 = \\frac{-4}{4} = -1$$',
            '6. חזרה למשתנה המקורי $x$: $$\\ln x = 1.5 \\implies x = e^{1.5} = e^{3/2}$$ $$\\ln x = -1 \\implies x = e^{-1}$$'
          ],
          finalAnswer: 'א'
        },
        expandedExplanation: {
          title: 'חוקי לוגריתמים',
          visualizationType: 'log-exp',
          content: `
            <p>כלי הנשק העיקרי לפתרון משוואות שבהן המשתנה נמצא בחזקה הוא ה-Log (או ה-ln).</p>
            <p>החוק החשוב ביותר כאן הוא: $$\\ln(a^b) = b \\cdot \\ln(a)$$</p>
            <p>חוק זה מאפשר לנו להפוך בעיה של חזקות (שהיא קשה) לבעיה של כפל (שהיא קלה יותר, ולרוב מובילה למשוואה לינארית או ריבועית).</p>
          `
        }
      },
      {
        id: 13,
        title: 'זהויות היפרבוליות',
        content: 'פשט את הביטוי לצורה אלגברית: $$y(x) = \\tanh^2(\\cosh^{-1}x)$$',
        type: 'multiple-choice',
        options: [
          { id: 'a', text: '$\\frac{x^2 - 1}{x^2}$', isCorrect: true },
          { id: 'b', text: '$\\frac{x^2 + 1}{x^2}$', isCorrect: false },
          { id: 'c', text: '$\\frac{1}{x^2}$', isCorrect: false },
          { id: 'd', text: '$1-x^2$', isCorrect: false },
        ],
        solution: {
          concept: 'שימוש בזהויות היסוד ההיפרבוליות. הזהות המרכזית: $\\cosh^2 t - \\sinh^2 t = 1$.',
          steps: [
            '1. נסמן $t = \\cosh^{-1}x$. לפי הגדרה, זה אומר ש- $\\cosh t = x$.',
            '2. עלינו לחשב את $\\tanh^2 t$. נזכור ש-$\\tanh t = \\frac{\\sinh t}{\\cosh t}$, ולכן: $$\\tanh^2 t = \\frac{\\sinh^2 t}{\\cosh^2 t}$$',
            '3. נבודד את $\\sinh^2 t$ מהזהות היסודית: $$\\sinh^2 t = \\cosh^2 t - 1$$',
            '4. נציב בביטוי של ה-$\\tanh$: $$\\tanh^2 t = \\frac{\\cosh^2 t - 1}{\\cosh^2 t}$$',
            '5. נחזיר את $x$ (כזכור $\\cosh t = x$): $$y(x) = \\frac{x^2 - 1}{x^2}$$'
          ],
          finalAnswer: 'א'
        },
        expandedExplanation: {
          title: 'פונקציות היפרבוליות',
          visualizationType: 'general',
          content: `
            <p>הפונקציות ההיפרבוליות נקראות כך כי הן מגדירות היפרבולה ($x^2 - y^2 = 1$), בדיוק כמו שהפונקציות הטריגונומטריות מגדירות מעגל ($x^2 + y^2 = 1$).</p>
            <p>בגלל הדמיון בביטויים, הזהויות שלהן כמעט זהות לזהויות הטריגונומטריות, רק עם הבדלי סימן קטנים ("כלל אוסבורן").</p>
            <p>הזהות היסודית היא: $\\cosh^2x - \\sinh^2x = 1$.</p>
          `
        }
      },
      {
        id: 14,
        title: 'סכום טור הנדסי ופונקציה מעריכית',
        content: 'חשב את המכפלה ($m \\in \\mathbb{N}$): $$(e^x - 1)(1 + e^x + e^{2x} + \\dots + e^{(m-1)x})$$',
        type: 'multiple-choice',
        options: [
          { id: 'a', text: '$e^{mx} - 1$', isCorrect: true },
          { id: 'b', text: '$e^{mx} + 1$', isCorrect: false },
          { id: 'c', text: '$\\frac{e^{mx}-1}{e^x-1}$', isCorrect: false },
        ],
        solution: {
          concept: 'זיהוי סכום של סדרה הנדסית או שימוש בנוסחת כפל מקוצר מוכללת $(a-b)(a^{n-1} + ... + b^{n-1}) = a^n - b^n$.',
          steps: [
            '1. נתבונן בסוגריים הימניים: $1 + e^x + (e^x)^2 + \\dots + (e^x)^{m-1}$.',
            '2. זוהי סדרה הנדסית עם איבר ראשון $a_1 = 1$, מנה $q = e^x$, ומספר איברים $m$.',
            '3. נוסחת הסכום היא $S_m = \\frac{a_1(q^m - 1)}{q - 1}$.',
            '4. נציב את הערכים: $$S_m = \\frac{1 \\cdot ((e^x)^m - 1)}{e^x - 1} = \\frac{e^{mx} - 1}{e^x - 1}$$',
            '5. הביטוי המקורי בתרגיל הוא המכפלה של $(e^x - 1)$ בסכום הזה: $$(e^x - 1) \\cdot \\frac{e^{mx} - 1}{e^x - 1}$$',
            '6. המכנה מצטמצם ונשארים עם: $$e^{mx} - 1$$'
          ],
          finalAnswer: 'א'
        },
        expandedExplanation: {
          title: 'סדרה הנדסית',
          visualizationType: 'general',
          content: `
            <p>סדרה הנדסית היא סדרה שבה המנה בין כל שני איברים סמוכים היא קבועה.</p>
            <p>בתרגיל זה המנה היא $e^x$.</p>
            <p>נוסחת הכפל המקוצר $(a-b)(a^{n-1} + ... + b^{n-1}) = a^n - b^n$ היא למעשה דרך אחרת להסתכל על סכום של סדרה הנדסית. כאשר מכפילים את הסכום בגורם ה"מצמצם", כל האיברים הפנימיים מתבטלים ("טלסקופים") ונשארים רק הקצוות.</p>
          `
        }
      },
      {
        id: 15,
        title: 'חישוב ערך היפרבולי הפוך',
        content: 'חשב ללא מחשבון: $$e^{\\tanh^{-1}(1/2)}$$',
        type: 'multiple-choice',
        options: [
          { id: 'a', text: '$\\sqrt{3}$', isCorrect: true },
          { id: 'b', text: '$3$', isCorrect: false },
          { id: 'c', text: '$\\frac{1}{\\sqrt{3}}$', isCorrect: false },
        ],
        solution: {
          concept: 'שימוש בהגדרה הלוגריתמית של הפונקציות ההיפרבוליות ההפוכות.',
          steps: [
            '1. הנוסחה המפורשת ל-$\\tanh^{-1}x$ היא: $$\\tanh^{-1}x = \\frac{1}{2}\\ln\\left(\\frac{1+x}{1-x}\\right)$$',
            '2. נציב $x=1/2$: $$\\tanh^{-1}(0.5) = \\frac{1}{2}\\ln\\left(\\frac{1+0.5}{1-0.5}\\right) = \\frac{1}{2}\\ln\\left(\\frac{1.5}{0.5}\\right) = \\frac{1}{2}\\ln(3)$$',
            '3. נעלה את המקדם כחזקה (חוקי לוגים): $$\\ln(3^{1/2}) = \\ln(\\sqrt{3})$$',
            '4. נציב חזרה בביטוי המקורי: $$e^{\\ln(\\sqrt{3})}$$',
            '5. ה-$e$ וה-$\\ln$ מבטלים זה את זה, והתוצאה היא: $$\\sqrt{3}$$'
          ],
          finalAnswer: 'א'
        },
        expandedExplanation: {
          title: 'הקשר בין היפרבולי ללוגריתמי',
          visualizationType: 'log-exp',
          content: `
            <p>כל הפונקציות ההיפרבוליות ההפוכות ($\sinh^{-1}, \cosh^{-1}, \tanh^{-1}$) ניתנות לביטוי באמצעות לוגריתמים ($\ln$).</p>
            <p>זה הגיוני, מכיוון שהפונקציות ההיפרבוליות המקוריות מוגדרות באמצעות אקספוננטים ($e^x$), והפונקציה ההפוכה לאקספוננט היא הלוגריתם.</p>
            <p>הנוסחה $\\tanh^{-1}x = \\frac{1}{2}\\ln\\left(\\frac{1+x}{1-x}\\right)$ היא שימושית מאוד וכדאי להכיר אותה למבחן.</p>
          `
        }
      },
      {
        id: 16,
        title: 'פונקציה הפוכה - היפרבולית',
        content: 'מצא את הפונקציה ההפוכה ל: $$y = e^{\\sinh^{-1}x}$$',
        type: 'multiple-choice',
        options: [
          { id: 'a', text: '$f^{-1}(x) = \\frac{x^2-1}{2x}$', isCorrect: true },
          { id: 'b', text: '$f^{-1}(x) = \\frac{x^2+1}{2x}$', isCorrect: false },
          { id: 'c', text: '$f^{-1}(x) = x^2-1$', isCorrect: false },
          { id: 'd', text: '$f^{-1}(x) = \\ln(x)$', isCorrect: false },
        ],
        solution: {
          concept: 'כדי למצוא פונקציה הפוכה, מחלצים את $x$ כפונקציה של $y$, ואז מחליפים את הסימונים בסוף.',
          steps: [
            '1. נתון $y = e^{\\sinh^{-1}x}$. נוציא $\\ln$ משני הצדדים: $$\\ln y = \\sinh^{-1}x$$',
            '2. נפעיל $\\sinh$ על שני הצדדים: $$x = \\sinh(\\ln y)$$',
            '3. נשתמש בהגדרת הסינוס ההיפרבולי $\\sinh t = \\frac{e^t - e^{-t}}{2}$: $$x = \\frac{e^{\\ln y} - e^{-\\ln y}}{2}$$',
            '4. נפשט את הביטויים: $$e^{\\ln y} = y$$ $$e^{-\\ln y} = e^{\\ln(y^{-1})} = y^{-1} = \\frac{1}{y}$$',
            '5. נציב חזרה: $$x = \\frac{y - \\frac{1}{y}}{2} = \\frac{\\frac{y^2-1}{y}}{2} = \\frac{y^2-1}{2y}$$',
            '6. כתיבה כפונקציה של $x$ ($f^{-1}$): $$f^{-1}(x) = \\frac{x^2-1}{2x}$$'
          ],
          finalAnswer: 'א'
        },
        expandedExplanation: {
          title: 'אלגוריתם למציאת פונקציה הפוכה',
          visualizationType: 'inverse-function',
          content: `
            <p>השלבים למציאת פונקציה הפוכה תמיד קבועים:</p>
            <ol class="list-decimal list-inside space-y-2 my-2">
              <li>כתוב את המשוואה $y = f(x)$.</li>
              <li>נסה לבודד את $x$ (זה החלק האלגברי הקשה).</li>
              <li>ברגע שקיבלת $x = \text{expression with } y$, החלף את האותיות: ל-$y$ קרא $x$, ול-$x$ קרא $f^{-1}(x)$.</li>
            </ol>
            <p>גרפית, פעולה זו שקולה לשיקוף הגרף סביב הישר $y=x$.</p>
          `
        }
      },
      {
        id: 17,
        title: 'פונקציה הפוכה - סכום אקספוננטים',
        content: 'מצא את הפונקציה ההפוכה ל: $$f(x) = 2^x + 2^{-x}, \\quad (x \\ge 0)$$',
        type: 'multiple-choice',
        options: [
          { id: 'a', text: '$f^{-1}(x) = \\log_2(x + \\sqrt{x^2 - 4}) - 1$', isCorrect: true },
          { id: 'b', text: '$f^{-1}(x) = \\log_2(x - \\sqrt{x^2 - 4})$', isCorrect: false },
          { id: 'c', text: '$f^{-1}(x) = \\log_2(x^2 - 4)$', isCorrect: false },
        ],
        solution: {
          concept: 'חילוץ משתנה מתוך סכום של מספר וההופכי שלו דורש פתרון משוואה ריבועית.',
          steps: [
            '1. נשווה ל-$y$: $$y = 2^x + \\frac{1}{2^x}$$',
            '2. נכפול ב-$2^x$ (מספר חיובי) כדי להיפטר מהמכנה: $$y \\cdot 2^x = (2^x)^2 + 1$$',
            '3. נעביר אגפים למשוואה ריבועית, כאשר המשתנה הוא $2^x$: $$(2^x)^2 - y(2^x) + 1 = 0$$',
            '4. נפתור באמצעות נוסחת השורשים: $$2^x = \\frac{y \\pm \\sqrt{y^2 - 4}}{2}$$',
            '5. בחירת הסימן: נתון ש-$x \\ge 0$, ולכן $2^x \\ge 1$. אם נבחר במינוס, נקבל ערך קטן מ-1 (עבור $y>2$). לכן נבחר בפלוס: $$2^x = \\frac{y + \\sqrt{y^2 - 4}}{2}$$',
            '6. נוציא $\\log_2$ כדי לבודד את $x$: $$x = \\log_2\\left(\\frac{y + \\sqrt{y^2 - 4}}{2}\\right)$$',
            '7. חוקי לוגים (חילוק הופך לחיסור): $$x = \\log_2(y + \\sqrt{y^2 - 4}) - \\log_2(2) = \\log_2(y + \\sqrt{y^2 - 4}) - 1$$'
          ],
          finalAnswer: 'א'
        },
        expandedExplanation: {
          title: 'משוואות ריבועיות נסתרות',
          visualizationType: 'general',
          content: `
            <p>תבנית נפוצה במבחנים היא משוואה מהצורה $t + \frac{1}{t} = y$.</p>
            <p>במבט ראשון זה לא נראה כמו משוואה ריבועית, אבל הכפלה ב-$t$ חושפת את המבנה: $t^2 - yt + 1 = 0$.</p>
            <p>זה מאפשר לנו להשתמש בנוסחת השורשים כדי לבודד את המשתנה, גם אם המשתנה המקורי הוא פונקציה מורכבת כמו $2^x$.</p>
          `
        }
      },
      {
        id: 18,
        title: 'בדיקת זהות מורכבת',
        content: 'האם הזהות הבאה נכונה? $$\\tanh^{-1}(\\tan^{-1}(\\sin x)) = \\sin x$$',
        type: 'multiple-choice',
        options: [
          { id: 'a', text: 'נכון', isCorrect: true },
          { id: 'b', text: 'לא נכון', isCorrect: false },
        ],
        solution: {
          concept: 'בדיקת נכונות זהות במקרי קצה ובחינת הקשר של המבחן הספציפי.',
          steps: [
            '1. ניתוח מתמטי טהור: זהות זו **אינה** נכונה באופן כללי לכל $x$.',
            '2. עם זאת, עבור ערכי $x$ קטנים מאוד (קירוב טיילור מסדר ראשון): $\\sin x \\approx x$, $\\tan^{-1}x \\approx x$, $\\tanh^{-1}x \\approx x$. במקרה זה שני הצדדים שואפים ל-$x$.',
            '3. הקשר הבוחן: בשאלות שחזור מבוחן האמצע הספציפי של הקורס הזה, שאלה זו הופיעה והתשובה שסומנה כנכונה במערכת הייתה "נכון".',
            '4. לכן, בהקשר של ההכנה למבחן הספציפי הזה, יש לסמן "נכון", תוך הבנה שמתמטית זו כנראה טעות בניסוח השאלה המקורית או שמדובר בקירוב.'
          ],
          finalAnswer: 'א (לפי מפתח בחינה)'
        },
        expandedExplanation: {
          title: 'קירובים לינאריים',
          visualizationType: 'general',
          content: `
            <p>כאשר $x$ קטן מאוד (קרוב לאפס), הרבה פונקציות מסובכות מתנהגות כמו הקו הישר $y=x$.</p>
            <p>זה נכון עבור $\sin(x), \tan(x), \sinh(x), \tanh(x)$ וגם עבור הפונקציות ההפוכות שלהן.</p>
            <p>לכן, עבור $x$ קטן, הביטוי $\\tanh^{-1}(\\tan^{-1}(\\sin x))$ מתנהג בערך כמו $\\tanh^{-1}(\\tan^{-1}(x)) \\approx \\tanh^{-1}(x) \\approx x$.</p>
          `
        }
      },
       {
        id: 19,
        title: 'משוואה מעריכית סימטרית',
        content: 'מצא את פתרונות המשוואה: $$2^x + 2^{-x} = 4$$',
        type: 'multiple-choice',
        options: [
          { id: 'a', text: '$x = \\log_2(2 + \\sqrt{3})$', isCorrect: false },
          { id: 'b', text: '$x = \\log_2(2 \\pm \\sqrt{3})$', isCorrect: true },
          { id: 'c', text: '$x = \\pm 2$', isCorrect: false },
        ],
        solution: {
          concept: 'זוהי משוואה זהה למבנה שפתרנו בתרגיל 17, רק עם הצבה של $y=4$.',
          steps: [
            '1. ראינו בתרגיל 17 שהפתרון למשוואה $2^x + 2^{-x} = y$ הוא: $$2^x = \\frac{y \\pm \\sqrt{y^2-4}}{2}$$',
            '2. נציב $y=4$: $$2^x = \\frac{4 \\pm \\sqrt{16-4}}{2} = \\frac{4 \\pm \\sqrt{12}}{2}$$',
            '3. נפשט את השורש ($\\sqrt{12} = \\sqrt{4 \\cdot 3} = 2\\sqrt{3}$): $$2^x = \\frac{4 \\pm 2\\sqrt{3}}{2} = 2 \\pm \\sqrt{3}$$',
            '4. נמצא את $x$: $$x = \\log_2(2 \\pm \\sqrt{3})$$',
            '5. שים לב: שני הפתרונות חוקיים (בניגוד לתרגיל 17 שם דרשו $x>0$). כאן $2+\\sqrt{3} \\approx 3.73$ (נותן $x$ חיובי) ו-$2-\\sqrt{3} \\approx 0.26$ (נותן $x$ שלילי). לכן נקבל שני פתרונות.'
          ],
          finalAnswer: 'ב'
        },
        expandedExplanation: {
          title: 'סימטריה בפתרונות',
          visualizationType: 'parity-even',
          content: `
            <p>הפונקציה $f(x) = 2^x + 2^{-x}$ היא פונקציה <strong>זוגית</strong> (סימטרית סביב ציר Y).</p>
            <p>זה אומר שאם $x$ הוא פתרון, אז גם $-x$ חייב להיות פתרון.</p>
            <p>נבדוק את הפתרונות שקיבלנו: $\\log_2(2+\\sqrt{3})$ ו-$\\log_2(2-\\sqrt{3})$.</p>
            <p>האם הם נגדיים? כן! כי $(2+\\sqrt{3})(2-\\sqrt{3}) = 4-3=1$, ולכן הם הופכיים זה לזה. לוג של מספרים הופכיים נותן תוצאות נגדיות ($\log(1/a) = -\log(a)$).</p>
          `
        }
      }
    ]
  }
];